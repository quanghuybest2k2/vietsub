# Offline Vietnamese Subtitle Configuration

audio:
  sample_rate: 16000
  chunk_size: 1024
  channels: 1
  device_index: null

whisper:
  model_size: "base"
  language: "auto"
  device: "auto"
  temperature: 0.0
  best_of: 1
  beam_size: 1
  cpu_threads: 4
  num_workers: 2
  chunk_length: 5
  overlap: 1

translation:
  target_language: "vi"
  service: "free"
  export_batch_size: 64
  normal_batch_size: 32

# Anti-repetition settings (prevents Whisper hallucination in long videos)
anti_repetition:
  condition_on_previous_text: false # false = more stable for long videos
  repetition_penalty: 1.2 # >1.0 reduces repetition (recommended: 1.1-1.3)
  no_speech_threshold: 0.5 # higher = skip more noise (0.0-1.0)
  compression_ratio_threshold: 2.0 # lower = stricter filtering (recommended: 2.0-2.4)
  segment_similarity_threshold: 0.85 # similarity ratio to detect duplicates
  max_allowed_repetitions: 2 # max consecutive repetitions allowed

subtitles:
  font_family: "Arial"
  font_size: 24
  font_color: [255, 255, 255]
  background_color: [0, 0, 0]
  background_opacity: 0.7
  position: "bottom"
  margin: 50
  max_width: 0.8
  display_duration: 5.0
  fade_duration: 0.5
  max_chars_per_line: 50
  max_lines: 2
  text_align: "center"

performance:
  max_workers: 8
  translation_workers: 6
  translation_batch_size: 32
  export_translation_workers: 8
  export_translation_batch_size: 64
  processing_queue_size: 10
  max_cache_size: 1000
  cleanup_interval: 60

logging:
  level: "INFO"
  file_output: true
  console_output: true
  max_file_size: "10MB"
  backup_count: 3
